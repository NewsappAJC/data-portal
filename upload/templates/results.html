<!DOCTYPE html>
<html>
  <head>
    <script src="https://code.jquery.com/jquery-2.2.4.min.js"
      integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
      crossorigin="anonymous"></script>
  </head>
  <body>
    <h2>Waiting for a response</h2>
    <div id="response"></div>

    <script>
      var c = 0;

      function get_result() {
        $.ajax({
          type: 'GET', 
          url: '/check-status/',
          dataType: 'application/json',
          success: function(res) {
            var data = JSON.parse(res);
            if (data.status == 'PENDING') {
              c++;
              if (c < 10) {
                setTimeout(get_result, 500);
              };
              return;
            };
            $('#response').html(data.result)
            return
          }
        });
      };

      get_result();
    </script>
  </body>
</html>

